# FixOnce Context

> **Auto-generated file.** Do not edit manually.
> Last updated: 2026-02-21 21:37

---

## Project: FixOnce

## Current Goal

**Dashboard vNext - minimalist redesign with Deep Dive panel, logo integration, and all v3 features accessible**

---

## Decisions (MUST FOLLOW)

> **These are architectural decisions that MUST be respected.**
> Before making changes that contradict these, ask for explicit approval.

### Per-project Semantic Index with provider abstraction layer

*Reason:* Enables semantic search across project memory. Architecture: EmbeddingProvider abstraction (swappable models), EmbeddingConfig (version tracking), SemanticIndex (per-project), FastEmbedProvider (ONNX, no PyTorch). Index auto-rebuilds if model changes.

### MCP activity logging in dashboard

*Reason:* Added _log_mcp_activity helper to mcp_memory_server_v2.py to log update_live_record, log_decision, log_avoid, search_past_solutions calls to activity_log.json. Dashboard now shows these with icons.

### Display opening message and conversation in user's language, but store all data in English

*Reason:* Storage must be consistent (English) for search and dashboard. But AI should present information to user in whatever language they're speaking for better UX.

---

## Architecture

FixOnce is a persistent memory layer for AI coding assistants (Claude Code, Cursor). It remembers decisions, solutions, insights, and context across sessions so AI never forgets previous work.

**Stack:** Python 3, Flask, FastMCP (MCP protocol), Chrome Extension (JS), NumPy, scikit-learn (TF-IDF embeddings), SQLite, JSON storage

**Key Flows:**
- auto_init_session() - Initialize AI session with project context
- search_past_solutions() - Semantic search for past fixes before debugging
- log_decision/log_avoid - Persist architectural decisions permanently
- update_live_record - Save goals, insights, failed attempts
- get_browser_errors - Proactive error detection from Chrome extension
- Boundary detection - Auto-switch projects when file operations cross boundaries

---

---

## Key Insights

> Lessons learned from previous work. Search `search_past_solutions()` for more.

- Project structure: src/server.py (Flask main), src/mcp_server/mcp_memory_server_v2.py (MCP tools), src/core/ (business logic), src/api/ (REST endpoints), data/dashboard_v3.html (main UI)
- MCP Server runs on port 5000 (Flask) with tools like auto_init_session, update_live_record, log_decision, search_past_solutions, get_browser_errors
- Semantic search uses EmbeddingProvider abstraction (provider.py) with FastEmbedProvider (ONNX) for local embeddings - no PyTorch dependency
- Chrome extension (extension/) captures browser errors and sends to Flask server for proactive error detection
- Boundary detection (boundary_detector.py) auto-switches projects when AI edits files outside current project root - uses .git, package.json, pyproject.toml as markers
- Project data stored in data/projects_v2/{project_id}.json with embeddings in {project_id}.embeddings/ folder
- Dashboard activity now shows MCP tool calls (update_live_record, log_decision, log_avoid) with smart project detection when cwd is empty
- Testing MCP activity logging after server restart
- Dashboard vNext complete: SVG logo, Deep Dive panel with tabs (Timeline/Decisions/Insights/Avoids/System), MCP icons in What Changed, Glow effect for recent updates, ROI auto-calculated

---

---

*Generated by [FixOnce](https://github.com/fixonce) - AI Memory Layer*