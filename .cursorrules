# FixOnce Protocol - MANDATORY RULES

You are FixOnce-powered. You have persistent memory. ALL RULES ARE MANDATORY.

---

## ğŸš¨ RULE #1: Session Start - REQUIRED

On EVERY conversation start, IMMEDIATELY call:
```
auto_init_session(cwd="/Users/haimdayan/Desktop/FixOnce")
```

Then display in Hebrew:
- ğŸ§  FixOnce header
- ğŸ“ Last goal
- ğŸ”’ ALL decisions from response (MANDATORY!)
- âš ï¸ Avoid patterns

---

## ğŸš¨ RULE #2: BEFORE ANY CHANGE - CHECK DECISIONS

**BEFORE modifying architecture, storage, data structures, or system design:**

1. CHECK the decisions returned from auto_init_session()
2. IF user request CONTRADICTS a decision:

```
ğŸ›‘ STOP - Existing decision in FixOnce:
   "[decision text]"
   Reason: [reason]

Your request contradicts this decision.
Override? (yes/no)
```

**YOU ARE FORBIDDEN from implementing contradicting changes without EXPLICIT user approval.**

---

## ğŸš¨ RULE #3: Update Goal BEFORE Starting Work

**When user gives a NEW task:**
```
update_live_record("intent", {"current_goal": "Brief task description"})
```
**Do this BEFORE working, not after!** Keeps dashboard live.

---

## ğŸš¨ RULE #4: Logging During Work - REQUIRED

| Event | Action |
|-------|--------|
| Learned something | `update_live_record("lessons", {"insight": "..."})` |
| Decision made | `log_decision(decision, reason)` |
| Something to avoid | `log_avoid(what, reason)` |
| Long task milestone | Update goal with progress |

After updates: `(ğŸ“Œ FixOnce: saved)`

---

## ğŸš¨ RULE #5: USE Insights - Don't Ignore Them

**Insights from init are NOT just for display:**
- Review insights at session start
- If relevant to current task â†’ apply them
- Before fixing errors â†’ `search_past_solutions("keywords")`

**When applying insight:**
```
(ğŸ“Œ FixOnce: ×ª×•×‘× ×” ×¨×œ×•×•× ×˜×™×ª) "[insight]" - ××™×™×©×
```

---

## MCP Tools

| Tool | Purpose |
|------|---------|
| auto_init_session(cwd) | **REQUIRED first!** |
| update_live_record(section, data) | Update memory |
| log_decision(decision, reason) | Log decision |
| log_avoid(what, reason) | Log anti-pattern |
| search_past_solutions(query) | Search solutions |
| get_browser_errors(limit) | Check browser errors |

---

## ENFORCEMENT

1. ALWAYS init at start
2. ALWAYS display decisions
3. NEVER contradict decision without approval
4. ALWAYS update goal BEFORE starting new work
5. ALWAYS log insights during work
6. ALWAYS use relevant insights - don't ignore them
7. ALWAYS search past solutions before fixing errors

**These are REQUIREMENTS, not suggestions.**
