# FixOnce Protocol - MANDATORY RULES

You are FixOnce-powered. You have persistent memory. ALL RULES ARE MANDATORY.

---

## üö® RULE #1: Session Start - REQUIRED

On EVERY conversation start, IMMEDIATELY call:
```
auto_init_session(cwd="/Users/haimdayan/Desktop/FixOnce")
```

Then display:
- üß† FixOnce header
- üìç Last goal
- üí° ALL insights from response
- üîí ALL decisions from response
- ‚ö†Ô∏è Avoid patterns (if any)

---

## üö® RULE #2: BEFORE ANY CHANGE - CHECK DECISIONS

**BEFORE modifying architecture, storage, data structures, or system design:**

1. CHECK the decisions returned from auto_init_session()
2. IF user request CONTRADICTS a decision:

```
üõë STOP - Existing decision in FixOnce:
   "[decision text]"
   Reason: [reason]

Your request contradicts this decision.
Override? (yes/no)
```

**YOU ARE FORBIDDEN from implementing contradicting changes without EXPLICIT user approval.**

---

## üö® RULE #3: Update Goal BEFORE Starting Work

**When user gives a NEW task:**
```
update_live_record("intent", {"current_goal": "Brief task description"})
```
**Do this BEFORE working, not after!** Keeps dashboard live.

---

## üö® RULE #4: Logging During Work - REQUIRED

| Event | Action |
|-------|--------|
| Learned something | `update_live_record("lessons", {"insight": "..."})` |
| Decision made | `log_decision(decision, reason)` |
| Something to avoid | `log_avoid(what, reason)` |

After updates: `(üìå FixOnce: saved)`

---

## üö® RULE #5: SEARCH BEFORE DOING ANYTHING

**CRITICAL: When user asks about a PROBLEM or ERROR:**

### STEP 1: ALWAYS search first
```
search_past_solutions("problem keywords")
```

### STEP 2: Check the response
- **If found** ‚Üí USE IT IMMEDIATELY:
```
(üìå FixOnce: existing solution)
"[insight text]"

Applying this known solution...
```

- **If NOT found** ‚Üí Only then start investigating

### ‚õî FORBIDDEN ACTIONS:
- Starting to code/debug BEFORE searching
- Ignoring search results
- "Investigating" when solution already exists

### Examples:
‚ùå WRONG: User asks "why doesn't .app open?" ‚Üí Start writing C code
‚úÖ RIGHT: User asks "why doesn't .app open?" ‚Üí search_past_solutions(".app open click") ‚Üí Find existing solution ‚Üí Apply it

**This saves 10+ minutes per problem. DO NOT SKIP.**

---

## MCP Tools

| Tool | Purpose |
|------|---------|
| auto_init_session(cwd) | **REQUIRED first!** |
| update_live_record(section, data) | Update memory |
| log_decision(decision, reason) | Log decision |
| log_avoid(what, reason) | Log anti-pattern |
| search_past_solutions(query) | Search solutions |
| get_browser_errors(limit) | Check browser errors |
| get_live_record() | Read all insights |

---

## ENFORCEMENT

1. ALWAYS init at start
2. ALWAYS display decisions
3. NEVER contradict decision without approval
4. ALWAYS update goal BEFORE starting new work
5. ALWAYS log insights during work
6. ALWAYS use relevant insights - don't ignore them
7. ALWAYS search past solutions before fixing errors

**These are REQUIREMENTS, not suggestions.**
